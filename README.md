# Fantasy Hockey Analysis App

A Next.js application for analyzing and improving your Yahoo Fantasy Hockey team with AI-powered insights.

## Features

- **Yahoo Fantasy Integration**: Connect your Yahoo Fantasy Hockey account via OAuth
- **Free Agent Analysis**: Get AI-powered recommendations for free agent pickups
- **Opponent Analysis**: Analyze upcoming opponents and get strategic insights
- **Team Performance Insights**: Understand your team's strengths and weaknesses
- **Mobile Optimized**: Fully responsive design for use on the go

## Tech Stack

- **Frontend**: Next.js 14+ with TypeScript, Tailwind CSS
- **Backend**: Convex for data storage and server-side logic
- **Authentication**: Convex Auth + Yahoo OAuth
- **AI Analysis**: Together.ai LLM integration
- **Deployment**: Vercel

## Setup

### Prerequisites

- Node.js 18+ and npm
- Convex account
- Yahoo Developer account (for OAuth credentials)
- Together.ai account (for LLM API)

### Installation

1. Clone the repository:
```bash
git clone <repository-url>
cd PBC
```

2. Install dependencies:
```bash
npm install
```

3. Set up Convex:
```bash
npx convex dev
```

This will create a `.env.local` file with your Convex deployment URL.

4. Configure environment variables in `.env.local`:

```env
# Convex (auto-generated by `npx convex dev`)
NEXT_PUBLIC_CONVEX_URL=your_convex_url

# Yahoo OAuth
YAHOO_CLIENT_ID=your_yahoo_client_id
YAHOO_CLIENT_SECRET=your_yahoo_client_secret
NEXT_PUBLIC_YAHOO_REDIRECT_URI=http://localhost:3000/api/yahoo/callback

# Together.ai
TOGETHER_API_KEY=your_together_api_key

# Convex Auth (ConvexCredentials - optional, defaults to "default")
CONVEX_AUTH_APPLICATION_ID=default
```

5. Run the development server:
```bash
npm run dev
```

Open [http://localhost:3000](http://localhost:3000) in your browser.

## Yahoo OAuth Setup

1. Go to [Yahoo Developer Network](https://developer.yahoo.com/apps/create/)
2. Create a new application
3. Set the redirect URI to: `http://localhost:3000/api/yahoo/callback` (for development)
4. Copy your Client ID and Client Secret to `.env.local`

## Deployment to Vercel

1. Push your code to a Git repository (GitHub, GitLab, or Bitbucket)

2. Import your project in Vercel:
   - Go to [Vercel Dashboard](https://vercel.com/dashboard)
   - Click "Add New Project"
   - Import your Git repository

3. Configure environment variables in Vercel:
   - Go to Project Settings → Environment Variables
   - Add all variables from `.env.local`
   - Update `NEXT_PUBLIC_YAHOO_REDIRECT_URI` to your production URL:
     ```
     https://your-domain.vercel.app/api/yahoo/callback
     ```

4. Deploy:
   - Vercel will automatically deploy on push to main branch
   - Or manually trigger a deployment from the dashboard

5. Update Yahoo OAuth redirect URI:
   - Add your production callback URL to Yahoo Developer Console
   - Format: `https://your-domain.vercel.app/api/yahoo/callback`

## Convex Deployment

Deploy your Convex backend to production:

```bash
npx convex deploy
```

This will deploy your Convex functions and schema to production.

## Usage

1. **Connect Yahoo Account**: Click "Connect Yahoo Account" on the dashboard
2. **Sync Data**: Click "Refresh Data" to sync your leagues and teams
3. **View Free Agents**: Navigate to Free Agents page and select a league
4. **Get AI Analysis**: Click "Get AI Analysis" to get recommendations
5. **Analyze Opponents**: Go to Opponents page to analyze upcoming matchups

## Project Structure

```
├── app/                    # Next.js app directory
│   ├── (main)/            # Main app routes
│   │   ├── dashboard/     # Dashboard page
│   │   ├── free-agents/   # Free agents page
│   │   └── opponents/     # Opponents page
│   ├── api/               # API routes
│   │   └── yahoo/         # Yahoo OAuth routes
│   └── layout.tsx         # Root layout
├── components/            # React components
├── convex/                # Convex backend
│   ├── schema.ts         # Database schema
│   ├── yahoo.ts          # Yahoo OAuth functions
│   ├── yahooApi.ts       # Yahoo API client
│   ├── dataSync.ts       # Data synchronization
│   └── llm.ts            # LLM analysis functions
└── public/                # Static assets
```

## License

ISC

